{"openapi":"3.0.2","info":{"title":"ACR-DSI Model API","version":"0.1.0"},"paths":{"/inference":{"post":{"tags":["model"],"summary":"Request made by the platform to the model for model inference.","operationId":"inference_inference_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceRequest"}}},"required":true},"responses":{"202":{"description":"Inference request accepted.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"204":{"description":"Algorithm will not run."},"400":{"description":"Malformed request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"401":{"description":"Unauthorized request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"403":{"description":"Forbidden request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"500":{"description":"Internal server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"501":{"description":"Trigger not supported.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"503":{"description":"Service unavailable.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"505":{"description":"HTTP version not supported.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health/live":{"get":{"tags":["model"],"summary":"Request made by the platform to the model to ascertain whether a model restart is required.","operationId":"live_health_live_get","responses":{"200":{"description":"Model is healthy and does not require restart.","content":{"application/json":{"schema":{}}}},"500":{"description":"Model is unhealthy and requires restart."}}}},"/health/ready":{"get":{"tags":["model"],"summary":"Request made by the platform to the model to ascertain whether the model ready for new requests.","operationId":"ready_health_ready_get","responses":{"200":{"description":"Model is ready to accept new requests.","content":{"application/json":{"schema":{}}}},"500":{"description":"Model is temporarily unable to accept new requests."}}}},"/RESPONSE_URL":{"post":{"tags":["platform"],"summary":"Request made by the model to the platform to indicate inference is complete. *NOTE:* This url is a placeholder; in practice, the url is dictated by platform to model during inference request.","operationId":"done_RESPONSE_URL_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceCompleteRequest"}}},"required":true},"responses":{"200":{"description":"Model completion request successfully processed.","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AccessionNumber":{"title":"AccessionNumber","required":["accessionNumber"],"type":"object","properties":{"type":{"title":"Type","type":"string","default":"ACCESSION_NUMBER"},"accessionNumber":{"title":"Accessionnumber","type":"array","items":{"type":"string"}},"issuerOfAccessionNumber":{"title":"Issuerofaccessionnumber","maxLength":64,"minLength":1,"type":"string"}},"example":{"type":"ACCESSION_NUMBER","accessionNumber":"E123456789","issuerOfAccessionNumber":"ZYX.ISSUER.CBA"}},"ClinicalDataInterface":{"title":"ClinicalDataInterface","enum":["FileFolder","S3"],"type":"string","description":"An enumeration."},"ClinicalDataResponseData":{"title":"ClinicalDataResponseData","required":["interface","fileType","id"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"interface":{"$ref":"#/components/schemas/ClinicalDataInterface"},"fileType":{"title":"Filetype","type":"string"},"id":{"title":"Id","type":"array","items":{"type":"string"}}},"example":{"type":"CLINICAL_DATA_OTHER","interface":"FileFolder","fileType":"PDF","id":["/my/folder/file1","/my/folder/file2"]}},"DICOMDataInterface":{"title":"DICOMDataInterface","enum":["DICOMweb","DIMSE","FileFolder","S3"],"type":"string","description":"An enumeration."},"DICOMInstance":{"title":"DICOMInstance","required":["sopInstanceUid"],"type":"object","properties":{"sopInstanceUid":{"title":"Sopinstanceuid","type":"string"},"frames":{"title":"Frames","type":"array","items":{"type":"integer"}}},"example":{"sopInstanceUID":"123.456.789.000"}},"DICOMPatientID":{"title":"DICOMPatientID","required":["patientId"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"patientId":{"title":"Patientid","maxLength":64,"minLength":1,"type":"string"},"issuesOfPatientId":{"title":"Issuesofpatientid","maxLength":64,"minLength":1,"type":"string"}},"example":{"type":"DICOM_PATIENT_ID","patientId":"ABC.PATIENT.XYZ","issuerOfPatientId":"ZYX.ISSUER.CBA"}},"DICOMResponseData":{"title":"DICOMResponseData","required":["studies","interface"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"studies":{"title":"Studies","type":"array","items":{"$ref":"#/components/schemas/DICOMStudy"}},"interface":{"$ref":"#/components/schemas/DICOMDataInterface"}},"example":{"interface":"DICOMweb","type":"DICOM_UID","studies":[{"studyInstanceUid":"123.456","series":[{"seriesInstanceUid":"123.456.789","instances":[{"sopInstanceUID":"123.456.789.000"}]}]}]}},"DICOMSeries":{"title":"DICOMSeries","required":["seriesInstanceUid"],"type":"object","properties":{"seriesInstanceUid":{"title":"Seriesinstanceuid","type":"string"},"instances":{"title":"Instances","type":"array","items":{"$ref":"#/components/schemas/DICOMInstance"}}},"example":{"seriesInstanceUid":"123.456.789","instances":[{"sopInstanceUID":"123.456.789.000"}]}},"DICOMStudy":{"title":"DICOMStudy","required":["studyInstanceUid"],"type":"object","properties":{"studyInstanceUid":{"title":"Studyinstanceuid","type":"string"},"series":{"title":"Series","type":"array","items":{"$ref":"#/components/schemas/DICOMSeries"}}},"example":{"studyInstanceUid":"123.456","series":[{"seriesInstanceUid":"123.456.789","instances":[{"sopInstanceUID":"123.456.789.000"}]}]}},"DICOMUID":{"title":"DICOMUID","required":["studies"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"studies":{"title":"Studies","type":"array","items":{"$ref":"#/components/schemas/DICOMStudy"}}},"example":{"type":"DICOM_UID","studies":[{"studyInstanceUid":"123.456","series":[{"seriesInstanceUid":"123.456.789","instances":[{"sopInstanceUID":"123.456.789.000"}]}]}]}},"DICOMWebConnection":{"title":"DICOMWebConnection","required":["operations","uri"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/DICOMwebOperations"}},"uri":{"title":"Uri","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"authId":{"title":"Authid","type":"string"}},"example":{"operations":["WADO-RS","QIDO-RS"],"uri":"https://my.dicomweb.endpoint/dicomweb/","authId":"MY_TOKEN"}},"DICOMweb":{"title":"DICOMweb","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/DICOMWebConnection"}},"example":{"type":"DICOMweb","connectionDetails":{"operations":["WADO-RS","QIDO-RS"],"uri":"https://my.dicomweb.endpoint/dicomweb/","authId":"MY_TOKEN"}}},"DICOMwebOperations":{"title":"DICOMwebOperations","enum":["QIDO-RS","WADO-RS","STOW-RS","UPS-RS"],"type":"string","description":"An enumeration."},"DIMSE":{"title":"DIMSE","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/DIMSEConnection"}},"example":{"interface":"DIMSE","connectionDetails":{"operations":["C-FIND","C-GET"],"aet":"MYPACSAET","hostName":"mypacs.domain.org","port":104}}},"DIMSEConnection":{"title":"DIMSEConnection","required":["operations","aet","hostName","port"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/DIMSEOperations"}},"aet":{"title":"Aet","type":"string"},"hostName":{"title":"Hostname","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"port":{"title":"Port","type":"integer"}},"example":{"operations":["C-FIND","C-GET"],"aet":"MYPACSAET","hostName":"mypacs.domain.org","port":104}},"DIMSEOperations":{"title":"DIMSEOperations","enum":["C-STORE","C-FIND","C-MOVE","C-GET","C-ECHO","N-GET","N-SET","N-ACTION","N-CREATE","N-DELETE"],"type":"string","description":"An enumeration."},"FHIR":{"title":"FHIR","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/FHIRConnection"}},"example":{"interface":"FHIR","connectionDetails":{"operations":["SEARCH","READ"],"uri":"https://hackathon.siim.org/fhir-overview/fhir/","authId":"MyApiKey"}}},"FHIRConnection":{"title":"FHIRConnection","required":["operations","uri"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/FHIROperations"}},"uri":{"title":"Uri","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"authId":{"title":"Authid","type":"string"}},"example":{"operations":["SEARCH","READ"],"uri":"https://hackathon.siim.org/fhir-overview/fhir/","authId":"MyApiKey"}},"FHIROperations":{"title":"FHIROperations","enum":["READ","UPDATE","PATCH","DELETE","CREATE","SEARCH"],"type":"string","description":"An enumeration."},"FHIRResource":{"title":"FHIRResource","required":["resourceType","id"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"resourceType":{"$ref":"#/components/schemas/ResourceType"},"id":{"title":"Id","type":"array","items":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[a-zA-Z0-9-.]*"}}},"example":{"type":"FHIR_RESOURCE","resourceType":"Observation","id":"abc123"}},"FHIRResponseData":{"title":"FHIRResponseData","required":["resourceType","id"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"resourceType":{"$ref":"#/components/schemas/ResourceType"},"id":{"title":"Id","type":"array","items":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[a-zA-Z0-9-.]*"}},"interface":{"title":"Interface","type":"string"}},"example":{"interface":"FHIR","type":"FHIR_RESOURCE","resourceType":"Observation","id":"abc123"}},"FileFolder":{"title":"FileFolder","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/FileFolderConnection"}},"example":{"interface":"FileFolder","connectionDetails":{"operations":["READ"],"path":"/my/mainfolder/subfolder"}}},"FileFolderConnection":{"title":"FileFolderConnection","required":["operations","path"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/FileFolderOperations"}},"path":{"title":"Path","type":"string","format":"file-path"}},"example":{"operations":["READ"],"path":"/my/mainfolder/subfolder"}},"FileFolderOperations":{"title":"FileFolderOperations","enum":["READ","WRITE"],"type":"string","description":"An enumeration."},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"InferenceCompleteRequest":{"title":"InferenceCompleteRequest","required":["transactionId","status"],"type":"object","properties":{"transactionId":{"title":"Transactionid","type":"string"},"status":{"title":"Status","type":"integer"},"message":{"title":"Message","type":"string"},"resources":{"title":"Resources","type":"array","items":{"anyOf":[{"$ref":"#/components/schemas/DICOMResponseData"},{"$ref":"#/components/schemas/FHIRResponseData"},{"$ref":"#/components/schemas/XDSResponseData"},{"$ref":"#/components/schemas/ClinicalDataResponseData"}]}}},"example":{"transactionId":"123-ABC-45DE","status":200,"message":"Algorithm successfully run. Stroke detected.","resources":[{"interface":"DICOMweb","type":"DICOM_UID","studies":[{"studyInstanceUid":"123.456","series":[{"seriesInstanceUid":"123.456.789","instances":[{"sopInstanceUID":"123.456.789.000"}]}]}]}]}},"InferenceRequest":{"title":"InferenceRequest","required":["transactionId","responseUri","inputMetadata","inputResources","outputResources"],"type":"object","properties":{"transactionId":{"title":"Transactionid","type":"string"},"responseUri":{"title":"Responseuri","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"responseAuthToken":{"title":"Responseauthtoken","type":"string"},"priority":{"title":"Priority","type":"integer"},"inputMetadata":{"$ref":"#/components/schemas/RequestTrigger"},"inputResources":{"title":"Inputresources","type":"array","items":{"anyOf":[{"$ref":"#/components/schemas/DICOMweb"},{"$ref":"#/components/schemas/DIMSE"},{"$ref":"#/components/schemas/FileFolder"},{"$ref":"#/components/schemas/FHIR"},{"$ref":"#/components/schemas/S3"},{"$ref":"#/components/schemas/XDSb"},{"$ref":"#/components/schemas/XDSIb"}]}},"outputResources":{"title":"Outputresources","type":"array","items":{"anyOf":[{"$ref":"#/components/schemas/DICOMweb"},{"$ref":"#/components/schemas/DIMSE"},{"$ref":"#/components/schemas/FileFolder"},{"$ref":"#/components/schemas/FHIR"},{"$ref":"#/components/schemas/S3"},{"$ref":"#/components/schemas/XDSb"},{"$ref":"#/components/schemas/XDSIb"}]}}},"example":{"transactionId":"123-ABC-45DE","responseUri":"http://my.platform.intranet/98765","responseAuthToken":"MY_TOKEN","priority":128,"inputMetadata":{"workflowStage":"STUDY_STORAGE","details":{"type":"DICOM_UID","studies":[{"studyInstanceUid":"123.456","series":[{"seriesInstanceUid":"123.456.789","instances":[{"sopInstanceUID":"123.456.789.000"}]}]}]}},"inputResources":[{"type":"DICOMweb","connectionDetails":{"operations":["WADO-RS","QIDO-RS"],"uri":"https://my.dicomweb.endpoint/dicomweb/","authId":"MY_TOKEN"}},{"interface":"FHIR","connectionDetails":{"operations":["SEARCH","READ"],"uri":"https://hackathon.siim.org/fhir-overview/fhir/","authId":"MyApiKey"}}],"outputResources":[{"type":"DICOMweb","connectionDetails":{"operations":["WADO-RS"],"uri":"https://my.dicomweb.output.endpoint/dicomweb/","authId":"MY_TOKEN"}}]}},"InferenceResponse":{"title":"InferenceResponse","type":"object","properties":{"message":{"title":"Message","type":"string"}},"example":{"message":"Request received."}},"RequestTrigger":{"title":"RequestTrigger","required":["workflowStage","details"],"type":"object","properties":{"workflowStage":{"$ref":"#/components/schemas/WorkflowStage"},"details":{"title":"Details","anyOf":[{"$ref":"#/components/schemas/AccessionNumber"},{"$ref":"#/components/schemas/DICOMUID"},{"$ref":"#/components/schemas/DICOMPatientID"},{"$ref":"#/components/schemas/FHIRResource"}]}},"example":{"workflowStage":"STUDY_STORAGE","details":{"type":"DICOM_UID","studies":[{"studyInstanceUid":"123.456","series":[{"seriesInstanceUid":"123.456.789","instances":[{"sopInstanceUID":"123.456.789.000"}]}]}]}}},"ResourceType":{"title":"ResourceType","enum":["Observation","ImagingStudy","DiagnosticReport"],"type":"string","description":"An enumeration."},"S3":{"title":"S3","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/S3Connection"}},"example":{"interface":"S3","connectionDetails":{"operations":["LIST","GET"],"region":"us-east-1","bucket":"MY_BUCKET","accessKeyId":"MY_ACCESS_KEY_ID","secretAccessKey":"MY_SECRET","sessionToken":"MY_TEMPORARY_TOKEN"}}},"S3Connection":{"title":"S3Connection","required":["operations","region","bucket","accessKeyId","secretAccessKey"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/S3Operations"}},"region":{"title":"Region","type":"string"},"bucket":{"title":"Bucket","type":"string"},"accessKeyId":{"title":"Accesskeyid","type":"string"},"secretAccessKey":{"title":"Secretaccesskey","type":"string"},"sessionToken":{"title":"Sessiontoken","type":"string"}},"example":{"operations":["LIST","GET"],"region":"us-east-1","bucket":"MY_BUCKET","accessKeyId":"MY_ACCESS_KEY_ID","secretAccessKey":"MY_SECRET","sessionToken":"MY_TEMPORARY_TOKEN"}},"S3Operations":{"title":"S3Operations","enum":["GET","PUT","LIST"],"type":"string","description":"An enumeration."},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"WorkflowStage":{"title":"WorkflowStage","enum":["STUDY_ACQUISITION","STUDY_STORAGE","STUDY_INTERPRETATION","FHIR_ENCOUNTER","FHIR_CCG","USER_TRIGGERED","OTHER"],"type":"string","description":"An enumeration."},"XDSDataInterface":{"title":"XDSDataInterface","enum":["XDSb","XDS-Ib"],"type":"string","description":"An enumeration."},"XDSIb":{"title":"XDSIb","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/XDSIbConnection"}},"example":{"interface":"XDS-I.b","connectionDetails":{"operations":["REGISTRY_STORED_QUERY","REGISTRY_STORED_QUERY"],"uri":"http://my.xds.endpoint","authId":"MY_TOKEN"}}},"XDSIbConnection":{"title":"XDSIbConnection","required":["operations","uri"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/XDSIbOperations"}},"uri":{"title":"Uri","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"authID":{"title":"Authid","type":"string"}},"example":{"operations":["REGISTRY_STORED_QUERY","REGISTRY_STORED_QUERY"],"uri":"http://my.xds.endpoint","authId":"MY_TOKEN"}},"XDSIbOperations":{"title":"XDSIbOperations","enum":["REGISTRY_STORED_QUERY","RETRIEVE_DOCUMENT_SET","PROVIDE_REGISTER_IMAGING_DOCUMENT_SET"],"type":"string","description":"An enumeration."},"XDSResponseData":{"title":"XDSResponseData","required":["interface","submissionSetId"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"interface":{"$ref":"#/components/schemas/XDSDataInterface"},"submissionSetId":{"title":"Submissionsetid","type":"array","items":{"type":"string"}}},"example":{"type":"XDS","interface":"XDSb","submissionSetId":["123abc","456def"]}},"XDSb":{"title":"XDSb","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/XDSbConnection"}},"example":{"interface":"XDS.b","connectionDetails":{"operations":["REGISTRY_STORED_QUERY","RETRIEVE_DOCUMENT_SET"],"uri":"http://my.xds.endpoint","authId":"MY_TOKEN"}}},"XDSbConnection":{"title":"XDSbConnection","required":["operations","uri"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/XDSbOperations"}},"uri":{"title":"Uri","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"authID":{"title":"Authid","type":"string"}},"example":{"operations":["REGISTRY_STORED_QUERY","RETRIEVE_DOCUMENT_SET"],"uri":"http://my.xds.endpoint","authId":"MY_TOKEN"}},"XDSbOperations":{"title":"XDSbOperations","enum":["REGISTRY_STORED_QUERY","RETRIEVE_DOCUMENT_SET","PROVIDE_REGISTER_DOCUMENT_SET"],"type":"string","description":"An enumeration."}}}}