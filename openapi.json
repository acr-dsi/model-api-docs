{"openapi":"3.0.2","info":{"title":"ACR-DSI Model API","version":"0.1.0"},"paths":{"/inference":{"post":{"tags":["model"],"summary":"Request made by the platform to the model for model inference.","operationId":"inference_inference_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceRequest"}}},"required":true},"responses":{"202":{"description":"Inference request accepted.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"204":{"description":"Algorithm will not run."},"400":{"description":"Malformed request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"401":{"description":"Unauthorized request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"403":{"description":"Forbidden request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"500":{"description":"Internal server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"501":{"description":"Trigger not supported.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"503":{"description":"Service unavailable.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"505":{"description":"HTTP version not supported.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health/live":{"get":{"tags":["model"],"summary":"Request made by the platform to the model to ascertain whether a model restart is required.","operationId":"live_health_live_get","responses":{"200":{"description":"Model is healthy and does not require restart.","content":{"application/json":{"schema":{}}}},"500":{"description":"Model is unhealthy and requires restart."}}}},"/health/ready":{"get":{"tags":["model"],"summary":"Request made by the platform to the model to ascertain whether the model ready for new requests.","operationId":"ready_health_ready_get","responses":{"200":{"description":"Model is ready to accept new requests.","content":{"application/json":{"schema":{}}}},"500":{"description":"Model is temporarily unable to accept new requests."}}}},"/RESPONSE_URL":{"post":{"tags":["platform"],"summary":"Request made by the model to the platform to indicate inference is complete. *NOTE:* This url is a placeholder; in practice, the url is dictated by platform to model during inference request.","operationId":"done_RESPONSE_URL_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceCompleteRequest"}}},"required":true},"responses":{"200":{"description":"Model completion request successfully processed.","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AccessionNumber":{"title":"AccessionNumber","required":["accessionNumber"],"type":"object","properties":{"type":{"title":"Type","type":"string","default":"ACCESSION_NUMBER"},"accessionNumber":{"title":"Accessionnumber","type":"array","items":{"type":"string"}},"issuerOfAccessionNumber":{"title":"Issuerofaccessionnumber","maxLength":64,"minLength":1,"type":"string"}}},"ClinicalDataInterface":{"title":"ClinicalDataInterface","enum":["FileFolder","S3"],"type":"string","description":"An enumeration."},"ClinicalDataResponseData":{"title":"ClinicalDataResponseData","required":["interface","fileType","id"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"interface":{"$ref":"#/components/schemas/ClinicalDataInterface"},"fileType":{"title":"Filetype","type":"string"},"id":{"title":"Id","type":"array","items":{"type":"string"}}}},"DICOMDataInterface":{"title":"DICOMDataInterface","enum":["DICOMweb","DIMSE","FileFolder","S3"],"type":"string","description":"An enumeration."},"DICOMInstance":{"title":"DICOMInstance","required":["sopInstanceUid"],"type":"object","properties":{"sopInstanceUid":{"title":"Sopinstanceuid","type":"string"},"frames":{"title":"Frames","type":"array","items":{"type":"integer"}}}},"DICOMPatientID":{"title":"DICOMPatientID","required":["patientId"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"patientId":{"title":"Patientid","maxLength":64,"minLength":1,"type":"string"},"issuesOfPatientId":{"title":"Issuesofpatientid","maxLength":64,"minLength":1,"type":"string"}}},"DICOMResponseData":{"title":"DICOMResponseData","required":["studies","interface"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"studies":{"title":"Studies","type":"array","items":{"$ref":"#/components/schemas/DICOMStudy"}},"interface":{"$ref":"#/components/schemas/DICOMDataInterface"}}},"DICOMSeries":{"title":"DICOMSeries","required":["seriesInstanceUid"],"type":"object","properties":{"seriesInstanceUid":{"title":"Seriesinstanceuid","type":"string"},"instances":{"title":"Instances","type":"array","items":{"$ref":"#/components/schemas/DICOMInstance"}}}},"DICOMStudy":{"title":"DICOMStudy","required":["studyInstanceUid"],"type":"object","properties":{"studyInstanceUid":{"title":"Studyinstanceuid","type":"string"},"series":{"title":"Series","type":"array","items":{"$ref":"#/components/schemas/DICOMSeries"}}}},"DICOMUID":{"title":"DICOMUID","required":["studies"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"studies":{"title":"Studies","type":"array","items":{"$ref":"#/components/schemas/DICOMStudy"}}}},"DICOMWebConnection":{"title":"DICOMWebConnection","required":["operations","uri"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/DICOMWebOperations"}},"uri":{"title":"Uri","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"authId":{"title":"Authid","type":"string"}}},"DICOMWebOperations":{"title":"DICOMWebOperations","enum":["QIDO-RS","WADO-RS","STOW-RS","UPS-RS"],"type":"string","description":"An enumeration."},"DICOMweb":{"title":"DICOMweb","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/DICOMWebConnection"}}},"DIMSE":{"title":"DIMSE","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/DIMSEConnection"}}},"DIMSEConnection":{"title":"DIMSEConnection","required":["operations","aet","hostName","port"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/DIMSEOperations"}},"aet":{"title":"Aet","type":"string"},"hostName":{"title":"Hostname","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"port":{"title":"Port","type":"integer"}}},"DIMSEOperations":{"title":"DIMSEOperations","enum":["C-STORE","C-FIND","C-MOVE","C-ECHO","N-GET","N-SET","N-ACTION","N-CREATE","N-DELETE"],"type":"string","description":"An enumeration."},"FHIR":{"title":"FHIR","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/FHIRConnection"}}},"FHIRConnection":{"title":"FHIRConnection","required":["operations","uri"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/FHIROperations"}},"uri":{"title":"Uri","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"authId":{"title":"Authid","type":"string"}}},"FHIROperations":{"title":"FHIROperations","enum":["READ","UPDATE","PATCH","DELETE","CREATE","SEARCH"],"type":"string","description":"An enumeration."},"FHIRResource":{"title":"FHIRResource","required":["resourceType","id"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"resourceType":{"$ref":"#/components/schemas/ResourceType"},"id":{"title":"Id","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9-.]*","type":"string"}}},"FHIRResponseData":{"title":"FHIRResponseData","required":["resourceType","id"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"resourceType":{"$ref":"#/components/schemas/ResourceType"},"id":{"title":"Id","maxLength":64,"minLength":1,"pattern":"^[a-zA-Z0-9-.]*","type":"string"},"interface":{"title":"Interface","type":"string"}}},"FileFolder":{"title":"FileFolder","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/FileFolderConnection"}}},"FileFolderConnection":{"title":"FileFolderConnection","required":["operations","path"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/FileFolderOperations"}},"path":{"title":"Path","type":"string","format":"file-path"}}},"FileFolderOperations":{"title":"FileFolderOperations","enum":["READ","WRITE"],"type":"string","description":"An enumeration."},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"InferenceCompleteRequest":{"title":"InferenceCompleteRequest","required":["transactionId","status"],"type":"object","properties":{"transactionId":{"title":"Transactionid","type":"string"},"status":{"title":"Status","type":"integer"},"message":{"title":"Message","type":"string"},"resources":{"title":"Resources","type":"array","items":{"anyOf":[{"$ref":"#/components/schemas/DICOMResponseData"},{"$ref":"#/components/schemas/FHIRResponseData"},{"$ref":"#/components/schemas/XDSResponseData"},{"$ref":"#/components/schemas/ClinicalDataResponseData"}]}}}},"InferenceRequest":{"title":"InferenceRequest","required":["transactionId","responseUri","responseAuthToken","priority","inputMetadata","inputResources","outputResources"],"type":"object","properties":{"transactionId":{"title":"Transactionid","type":"string"},"responseUri":{"title":"Responseuri","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"responseAuthToken":{"title":"Responseauthtoken","type":"string"},"priority":{"title":"Priority","type":"integer"},"inputMetadata":{"$ref":"#/components/schemas/RequestTrigger"},"inputResources":{"title":"Inputresources","type":"array","items":{"anyOf":[{"$ref":"#/components/schemas/DICOMweb"},{"$ref":"#/components/schemas/DIMSE"},{"$ref":"#/components/schemas/FileFolder"},{"$ref":"#/components/schemas/FHIR"},{"$ref":"#/components/schemas/S3"},{"$ref":"#/components/schemas/XDSb"},{"$ref":"#/components/schemas/XDSIb"}]}},"outputResources":{"title":"Outputresources","type":"array","items":{"anyOf":[{"$ref":"#/components/schemas/DICOMweb"},{"$ref":"#/components/schemas/DIMSE"},{"$ref":"#/components/schemas/FileFolder"},{"$ref":"#/components/schemas/FHIR"},{"$ref":"#/components/schemas/S3"},{"$ref":"#/components/schemas/XDSb"},{"$ref":"#/components/schemas/XDSIb"}]}}}},"InferenceResponse":{"title":"InferenceResponse","required":["status"],"type":"object","properties":{"status":{"title":"Status","type":"integer"},"message":{"title":"Message","type":"string"}}},"RequestTrigger":{"title":"RequestTrigger","required":["workflowStage","details"],"type":"object","properties":{"workflowStage":{"$ref":"#/components/schemas/WorkflowStage"},"details":{"title":"Details","anyOf":[{"$ref":"#/components/schemas/AccessionNumber"},{"$ref":"#/components/schemas/DICOMUID"},{"$ref":"#/components/schemas/DICOMPatientID"},{"$ref":"#/components/schemas/FHIRResource"}]}}},"ResourceType":{"title":"ResourceType","enum":["Observation","ImagingStudy","DiagnosticReport"],"type":"string","description":"An enumeration."},"S3":{"title":"S3","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/S3Connection"}}},"S3Connection":{"title":"S3Connection","required":["operations","region","bucket","accessKeyId","secretAccessKey"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/S3Operations"}},"region":{"title":"Region","type":"string"},"bucket":{"title":"Bucket","type":"string"},"accessKeyId":{"title":"Accesskeyid","type":"string"},"secretAccessKey":{"title":"Secretaccesskey","type":"string"},"sessionToken":{"title":"Sessiontoken","type":"string"}}},"S3Operations":{"title":"S3Operations","enum":["GET","PUT","LIST"],"type":"string","description":"An enumeration."},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"WorkflowStage":{"title":"WorkflowStage","enum":["STUDY_ACQUISITION","STUDY_STORAGE","STUDY_INTERPRETATION","FHIR_ENCOUNTER","FHIR_CCG","USER_TRIGGERED","OTHER"],"type":"string","description":"An enumeration."},"XDSDataInterface":{"title":"XDSDataInterface","enum":["XDSb","XDS-Ib"],"type":"string","description":"An enumeration."},"XDSIb":{"title":"XDSIb","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/XDSIbConnection"}}},"XDSIbConnection":{"title":"XDSIbConnection","required":["operations","uri"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/XDSIbOperations"}},"uri":{"title":"Uri","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"authID":{"title":"Authid","type":"string"}}},"XDSIbOperations":{"title":"XDSIbOperations","enum":["REGISTRY_STORED_QUERY","RETRIEVE_DOCUMENT_SET","PROVIDE_REGISTER_IMAGING_DOCUMENT_SET"],"type":"string","description":"An enumeration."},"XDSResponseData":{"title":"XDSResponseData","required":["interface","submissionSetId"],"type":"object","properties":{"type":{"title":"Type","type":"string"},"interface":{"$ref":"#/components/schemas/XDSDataInterface"},"submissionSetId":{"title":"Submissionsetid","type":"array","items":{"type":"string"}}}},"XDSb":{"title":"XDSb","required":["connectionDetails"],"type":"object","properties":{"interface":{"title":"Interface","type":"string"},"connectionDetails":{"$ref":"#/components/schemas/XDSbConnection"}}},"XDSbConnection":{"title":"XDSbConnection","required":["operations","uri"],"type":"object","properties":{"operations":{"title":"Operations","type":"array","items":{"$ref":"#/components/schemas/XDSbOperations"}},"uri":{"title":"Uri","maxLength":65536,"minLength":1,"type":"string","format":"uri"},"authID":{"title":"Authid","type":"string"}}},"XDSbOperations":{"title":"XDSbOperations","enum":["REGISTRY_STORED_QUERY","RETRIEVE_DOCUMENT_SET","PROVIDE_REGISTER_DOCUMENT_SET"],"type":"string","description":"An enumeration."}}}}